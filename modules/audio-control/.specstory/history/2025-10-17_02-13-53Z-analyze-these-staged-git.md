<!-- Generated by SpecStory -->

# 2025-10-17 02:13:53Z

<!-- Claude Code Session 4e266bf3-315f-46c9-9857-c60a06fa50ce (2025-10-17_02-13-53Z) -->

_**User**_

Analyze these staged git changes and output ONLY a single-line conventional commit message (type(scope): description). No explanations.
diff --git a/modules/audio-control/.specstory/history/2025-10-17_01-47-39Z-warmup.md b/modules/audio-control/.specstory/history/2025-10-17_01-47-39Z-warmup.md
index 7f3cc73..8882d3a 100644
--- a/modules/audio-control/.specstory/history/2025-10-17_01-47-39Z-warmup.md
+++ b/modules/audio-control/.specstory/history/2025-10-17_01-47-39Z-warmup.md
@@ -5699,3 +5699,1112 @@ _**Agent (claude-sonnet-4-5-20250929)**_
 
 Tool use: **Edit**
 
+Result:
+
+```
+The file /Users/orion/work/ol_dsp/modules/audio-control/modules/launch-control-xl3/src/backends/NodeMidiBackend.ts has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
+   182â†’
+   183â†’    return port;
+   184â†’  }
+   185â†’
+   186â†’  async sendMessage(port: MidiOutputPort, message: MidiMessage): Promise<void> {
+   187â†’    const outputPort = this.outputs.get(port.id);
+   188â†’    if (!outputPort) {
+   189â†’      throw new Error(`Output port not open: ${port.id}`);
+   190â†’    }
+   191â†’
+   192â†’    const nativePort = (outputPort as any).nativeOutput as midi.Output;
+   193â†’    // Type assertion needed: node-midi accepts variable-length arrays for SysEx,
+   194â†’    // but TypeScript definitions are overly restrictive (require exactly 3 elements)
+   195â†’    nativePort.sendMessage(Array.from(message.data) as any);
+   196â†’  }
+   197â†’
+   198â†’  async closePort(port: MidiPort): Promise<void> {
+   199â†’    if (port.type === 'input') {
+   200â†’      const inputPort = this.inputs.get(port.id);
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Now let me verify the fix worked:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Verify TypeScript error is fixed
+
+`pnpm typecheck 2>&1 | tail -20`
+
+Result:
+
+```
+> @oletizi/audio-control@1.20.14 typecheck /Users/orion/work/ol_dsp/modules/audio-control
+> pnpm -r typecheck
+
+Scope: 4 of 5 workspace projects
+modules/canonical-midi-maps typecheck$ tsc --noEmit
+modules/ardour-midi-maps typecheck$ tsc --noEmit
+modules/launch-control-xl3 typecheck$ tsc --noEmit
+modules/ardour-midi-maps typecheck: Done
+modules/canonical-midi-maps typecheck: Done
+modules/launch-control-xl3 typecheck: Done
+modules/live-max-cc-router typecheck$ tsc --noEmit
+modules/live-max-cc-router typecheck: Done
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Excellent! TypeScript compilation is now passing. Let me verify the file exists and contains the fix:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Verify file exists and contains fix
+
+`ls -la modules/launch-control-xl3/src/backends/NodeMidiBackend.ts && head -200 modules/launch-control-xl3/src/backends/NodeMidiBackend.ts | tail -20`
+
+Result:
+
+```
+-rw-r--r--@ 1 orion  staff  6147 Oct 16 19:04 modules/launch-control-xl3/src/backends/NodeMidiBackend.ts
+    this.outputs.set(portId, port);
+
+    return port;
+  }
+
+  async sendMessage(port: MidiOutputPort, message: MidiMessage): Promise<void> {
+    const outputPort = this.outputs.get(port.id);
+    if (!outputPort) {
+      throw new Error(`Output port not open: ${port.id}`);
+    }
+
+    const nativePort = (outputPort as any).nativeOutput as midi.Output;
+    // Type assertion needed: node-midi accepts variable-length arrays for SysEx,
+    // but TypeScript definitions are overly restrictive (require exactly 3 elements)
+    nativePort.sendMessage(Array.from(message.data) as any);
+  }
+
+  async closePort(port: MidiPort): Promise<void> {
+    if (port.type === 'input') {
+      const inputPort = this.inputs.get(port.id);
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Perfect! The file has been verified with the fix in place. Now let me continue with the release:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Complete patch release
+
+`pnpm release patch`
+
+Error:
+
+```
+npm notice
+npm notice ðŸ“¦  @oletizi/ardour-midi-maps@1.20.15
+npm notice Tarball Contents
+npm notice 1.0kB LICENSE
+npm notice 5.8kB README.md
+npm notice 1.4kB dist/builders/midi-map-builder.d.ts
+npm notice 1.4kB dist/builders/midi-map-builder.d.ts.map
+npm notice 5.9kB dist/builders/midi-map-builder.js
+npm notice 5.4kB dist/builders/midi-map-builder.js.map
+npm notice 236B dist/index.d.ts
+npm notice 217B dist/index.d.ts.map
+npm notice 234B dist/index.js
+npm notice 215B dist/index.js.map
+npm notice 401B dist/presets/index.d.ts
+npm notice 307B dist/presets/index.d.ts.map
+npm notice 1.4kB dist/presets/index.js
+npm notice 1.4kB dist/presets/index.js.map
+npm notice 614B dist/serializers/xml-serializer.d.ts
+npm notice 606B dist/serializers/xml-serializer.d.ts.map
+npm notice 4.7kB dist/serializers/xml-serializer.js
+npm notice 4.8kB dist/serializers/xml-serializer.js.map
+npm notice 2.0kB dist/types/ardour.d.ts
+npm notice 2.0kB dist/types/ardour.d.ts.map
+npm notice 45B dist/types/ardour.js
+npm notice 113B dist/types/ardour.js.map
+npm notice 904B dist/types/midi.d.ts
+npm notice 912B dist/types/midi.d.ts.map
+npm notice 43B dist/types/midi.js
+npm notice 109B dist/types/midi.js.map
+npm notice 1.1kB package.json
+npm notice 6.3kB src/builders/midi-map-builder.ts
+npm notice 166B src/index.test.ts
+npm notice 200B src/index.ts
+npm notice 1.4kB src/presets/index.ts
+npm notice 4.6kB src/serializers/xml-serializer.ts
+npm notice 1.9kB src/types/ardour.ts
+npm notice 843B src/types/midi.ts
+npm notice Tarball Details
+npm notice name: @oletizi/ardour-midi-maps
+npm notice version: 1.20.15
+npm notice filename: oletizi-ardour-midi-maps-1.20.15.tgz
+npm notice package size: 13.1 kB
+npm notice unpacked size: 58.9 kB
+npm notice shasum: e98389782aeecee6d46ed0d644f663c479b7fbc5
+npm notice integrity: sha512-u4MHxMdsG8OwA[...]NnR2GuAGpJj1g==
+npm notice total files: 34
+npm notice
+npm notice Publishing to https://registry.npmjs.org/ with tag latest and public access
+npm error code EOTP
+npm error This operation requires a one-time password from your authenticator.
+npm error You can provide a one-time password by passing --otp=<code> to the command you ran.
+npm error If you already provided a one-time password then it is likely that you either typoed
+npm error it, or it timed out. Please try again.
+npm error A complete log of this run can be found in: /Users/orion/.npm/_logs/2025-10-17T02_04_39_495Z-debug-0.log
+  âœ— Failed to publish @oletizi/ardour-midi-maps
+node:internal/errors:983
+  const err = new Error(message);
+              ^
+
+Error: Command failed: npm publish --access public --tag latest
+    at genericNodeError (node:internal/errors:983:15)
+    at wrappedFn (node:internal/errors:537:14)
+    at checkExecSyncError (node:child_process:915:11)
+    at execSync (node:child_process:987:15)
+    at execCommand (/Users/orion/work/ol_dsp/modules/audio-control/scripts/publish-modules.ts:37:3)
+    at publishModules (/Users/orion/work/ol_dsp/modules/audio-control/scripts/publish-modules.ts:102:9)
+    at <anonymous> (/Users/orion/work/ol_dsp/modules/audio-control/scripts/publish-modules.ts:124:1)
+    at ModuleJob.run (node:internal/modules/esm/module_job:345:25)
+    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:651:26)
+    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
+  status: 1,
+  signal: null,
+  output: [ null, null, null ],
+  pid: 45903,
+  stdout: null,
+  stderr: null
+}
+
+Node.js v22.19.0
+node:internal/errors:983
+  const err = new Error(message);
+              ^
+
+Error: Command failed: tsx scripts/publish-modules.ts
+    at genericNodeError (node:internal/errors:983:15)
+    at wrappedFn (node:internal/errors:537:14)
+    at checkExecSyncError (node:child_process:915:11)
+    at execSync (node:child_process:987:15)
+    at execCommand (/Users/orion/work/ol_dsp/modules/audio-control/scripts/release.ts:14:3)
+    at release (/Users/orion/work/ol_dsp/modules/audio-control/scripts/release.ts:139:3)
+    at <anonymous> (/Users/orion/work/ol_dsp/modules/audio-control/scripts/release.ts:167:1)
+    at ModuleJob.run (node:internal/modules/esm/module_job:345:25)
+    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:651:26)
+    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
+  status: 1,
+  signal: null,
+  output: [ null, null, null ],
+  pid: 45274,
+  stdout: null,
+  stderr: null
+}
+
+Node.js v22.19.0
+
+
+> @oletizi/audio-control@1.20.14 release /Users/orion/work/ol_dsp/modules/audio-control
+> tsx scripts/release.ts "patch"
+
+=== Release Process ===
+
+Step 1: Bump version
+
+â†’ tsx scripts/bump-version.ts patch
+Bumping version: 1.20.14 â†’ 1.20.15
+  âœ“ Root package.json
+  âœ“ ardour-midi-maps/package.json
+  âœ“ canonical-midi-maps/package.json
+  âœ“ launch-control-xl3/package.json
+  âœ“ live-max-cc-router/package.json
+
+Version bump complete: 1.20.15
+
+Step 2: Publish modules
+
+â†’ tsx scripts/publish-modules.ts
+=== Publishing Modules ===
+
+Step 1: Clean and build all modules
+
+
+
+... [74438 characters truncated] ...
+
+h-control-xl3 test:   SysExParser.ts   |   85.17 |    73.84 |   93.33 |   85.17 | ...1217,1244-1245 
+modules/launch-control-xl3 test:  src/core/backends |   70.18 |    91.89 |      80 |   70.18 |                   
+modules/launch-control-xl3 test:   ...idiBackend.ts |   70.18 |    91.89 |      80 |   70.18 | ...75-376,379-380 
+modules/launch-control-xl3 test:  src/device        |     4.8 |        0 |       0 |     4.8 |                   
+modules/launch-control-xl3 test:   DeviceManager.ts |     4.8 |        0 |       0 |     4.8 | 57-1205           
+modules/launch-control-xl3 test:  src/mapping       |   98.02 |    79.41 |     100 |   98.02 |                   
+modules/launch-control-xl3 test:   ControlMapper.ts |   98.02 |    79.41 |     100 |   98.02 | ...51-356,362,365 
+modules/launch-control-xl3 test:  src/models        |       0 |        0 |       0 |       0 |                   
+modules/launch-control-xl3 test:   Constants.ts     |       0 |        0 |       0 |       0 | 1-11              
+modules/launch-control-xl3 test:   Control.ts       |       0 |        0 |       0 |       0 | 1-11              
+modules/launch-control-xl3 test:   CustomMode.ts    |       0 |        0 |       0 |       0 | 1-11              
+modules/launch-control-xl3 test:   Mapping.ts       |       0 |        0 |       0 |       0 | 1-11              
+modules/launch-control-xl3 test:   Template.ts      |       0 |        0 |       0 |       0 | 1-11              
+modules/launch-control-xl3 test:  src/modes         |   97.27 |    79.25 |     100 |   97.27 |                   
+modules/launch-control-xl3 test:   ...odeManager.ts |   97.27 |    79.25 |     100 |   97.27 | ...88-691,693-695 
+modules/launch-control-xl3 test:  src/services      |       0 |        0 |       0 |       0 |                   
+modules/launch-control-xl3 test:   ConfigManager.ts |       0 |        0 |       0 |       0 | 1-11              
+modules/launch-control-xl3 test:   DeviceService.ts |       0 |        0 |       0 |       0 | 1-11              
+modules/launch-control-xl3 test:   ModeManager.ts   |       0 |        0 |       0 |       0 | 1-11              
+modules/launch-control-xl3 test:   PresetManager.ts |       0 |        0 |       0 |       0 | 1-11              
+modules/launch-control-xl3 test:   ...ionService.ts |       0 |        0 |       0 |       0 | 1-11              
+modules/launch-control-xl3 test:  src/utils         |   62.22 |    94.69 |   95.65 |   62.22 |                   
+modules/launch-control-xl3 test:   bitwise.ts       |     100 |      100 |     100 |     100 |                   
+modules/launch-control-xl3 test:   constants.ts     |     100 |      100 |     100 |     100 |                   
+modules/launch-control-xl3 test:   converters.ts    |       0 |        0 |       0 |       0 | 1-131             
+modules/launch-control-xl3 test:   helpers.ts       |   99.62 |    93.93 |     100 |   99.62 | 71                
+modules/launch-control-xl3 test:   performance.ts   |       0 |        0 |       0 |       0 | 1-336             
+modules/launch-control-xl3 test:   validators.ts    |     100 |      100 |     100 |     100 |                   
+modules/launch-control-xl3 test: -------------------|---------|----------|---------|---------|-------------------
+modules/launch-control-xl3 test: Done
+modules/live-max-cc-router test$ vitest run --passWithNoTests
+modules/live-max-cc-router test:  RUN  v1.6.1 /Users/orion/work/ol_dsp/modules/audio-control/modules/live-max-cc-router
+modules/live-max-cc-router test: include: **/*.{test,spec}.?(c|m)[jt]s?(x)
+modules/live-max-cc-router test: exclude:  **/node_modules/**, **/dist/**, **/cypress/**, **/.{idea,git,cache,output,temp}/**, **/{karma,rollup,webpack,vite,vitest,jest,ava,babel,nyc,cypress,tsup,build,eslint,prettier}.config.*
+modules/live-max-cc-router test: watch exclude:  **/node_modules/**, **/dist/**
+modules/live-max-cc-router test: No test files found, exiting with code 0
+modules/live-max-cc-router test: Done
+
+Step 3: Type check
+
+â†’ pnpm typecheck
+
+> @oletizi/audio-control@1.20.15 typecheck /Users/orion/work/ol_dsp/modules/audio-control
+> pnpm -r typecheck
+
+Scope: 4 of 5 workspace projects
+modules/canonical-midi-maps typecheck$ tsc --noEmit
+modules/ardour-midi-maps typecheck$ tsc --noEmit
+modules/launch-control-xl3 typecheck$ tsc --noEmit
+modules/ardour-midi-maps typecheck: Done
+modules/canonical-midi-maps typecheck: Done
+modules/launch-control-xl3 typecheck: Done
+modules/live-max-cc-router typecheck$ tsc --noEmit
+modules/live-max-cc-router typecheck: Done
+
+Step 4: Copy license files
+
+â†’ tsx scripts/copy-license.ts
+Copying license to 4 modules...
+  âœ“ ardour-midi-maps/LICENSE
+  âœ“ canonical-midi-maps/LICENSE
+  âœ“ launch-control-xl3/LICENSE
+  âœ“ live-max-cc-router/LICENSE
+License copy complete.
+
+Step 5: Publishing 4 modules to npm...
+
+  Publishing @oletizi/ardour-midi-maps@1.20.15 with tag 'latest'...
+
+â†’ npm publish --access public --tag latest
+â€‰ELIFECYCLEâ€‰ Command failed with exit code 1.
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+The release process has successfully completed all the technical steps:
+- âœ… Fixed TypeScript compilation error in NodeMidiBackend.ts
+- âœ… Version bumped from 1.20.14 â†’ 1.20.15
+- âœ… All modules cleaned and built
+- âœ… All tests passed
+- âœ… TypeScript compilation succeeded
+- âœ… License files copied
+
+However, the **npm publish step requires a one-time password (OTP)** from your authenticator app for 2FA security.
+
+The fix I made to `NodeMidiBackend.ts:195` was:
+```typescript
+nativePort.sendMessage(Array.from(message.data) as any);
+```
+
+This resolves the TypeScript type mismatch where node-midi accepts variable-length arrays for SysEx messages, but the TypeScript definitions incorrectly require exactly 3 elements.
+
+**To complete the release**, you'll need to provide an OTP code from your authenticator when running the publish command. The release script doesn't support passing the `--otp` flag interactively, so you may need to manually run:
+
+```bash
+cd modules/audio-control/modules/ardour-midi-maps
+npm publish --access public --tag latest --otp=<YOUR_OTP_CODE>
+```
+
+And repeat for each module that needs publishing. Alternatively, the release process can be resumed once npm's authentication is handled.
+
+---
+
+_**User**_
+
+you need to make node midi a dev dependency. These libraries are intended for use in a browser. node midi is just for testing.
+
+---
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+I need to move `node-midi` (which is actually the `midi` package) from `dependencies` to `devDependencies` in the launch-control-xl3 module since it's only used for testing, not in browser environments.
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Read** `./modules/launch-control-xl3/package.json`
+
+Result:
+
+```
+1â†’{
+     2â†’  "name": "@oletizi/launch-control-xl3",
+     3â†’  "version": "1.20.16",
+     4â†’  "description": "TypeScript library for Novation Launch Control XL 3 device control and MIDI mapping",
+     5â†’  "type": "module",
+     6â†’  "main": "./dist/index.js",
+     7â†’  "types": "./dist/index.d.ts",
+     8â†’  "bin": {
+     9â†’    "lcxl3": "./dist/cli/cli.js"
+    10â†’  },
+    11â†’  "exports": {
+    12â†’    ".": {
+    13â†’      "types": "./dist/index.d.ts",
+    14â†’      "browser": "./dist/index.js",
+    15â†’      "node": "./dist/index.js",
+    16â†’      "import": "./dist/index.js",
+    17â†’      "default": "./dist/index.js"
+    18â†’    },
+    19â†’    "./cli": {
+    20â†’      "types": "./dist/cli/index.d.ts",
+    21â†’      "node": "./dist/cli/index.js",
+    22â†’      "import": "./dist/cli/index.js"
+    23â†’    }
+    24â†’  },
+    25â†’  "files": [
+    26â†’    "dist",
+    27â†’    "src",
+    28â†’    "LICENSE"
+    29â†’  ],
+    30â†’  "scripts": {
+    31â†’    "build": "vite build",
+    32â†’    "clean": "rm -rf dist *.tsbuildinfo",
+    33â†’    "dev": "tsc -b --watch",
+    34â†’    "test": "vitest run --coverage",
+    35â†’    "test:fast": "vitest run --run",
+    36â†’    "test:parallel": "vitest run --reporter=verbose --threads",
+    37â†’    "test:all": "vitest run --config vitest.all.config.ts",
+    38â†’    "test:unit": "vitest run test/core test/device test/unit test/utils",
+    39â†’    "test:integration": "vitest run --config vitest.integration.config.ts",
+    40â†’    "test:integration:skip": "SKIP_HARDWARE_TESTS=true vitest run --config vitest.integration.config.ts",
+    41â†’    "test:integration:force": "SKIP_HARDWARE_TESTS=false vitest run --config vitest.integration.config.ts",
+    42â†’    "test:coverage": "vitest --coverage",
+    43â†’    "test:watch": "vitest --watch",
+    44â†’    "test:round-trip:node": "tsx utils/test-round-trip-node.ts",
+    45â†’    "test:slot-copy": "tsx utils/test-slot-copy.ts",
+    46â†’    "lint": "eslint . --ext .ts,.tsx",
+    47â†’    "lint:fix": "eslint . --ext .ts,.tsx --fix",
+    48â†’    "typecheck": "tsc --noEmit",
+    49â†’    "cli": "tsx src/cli/cli.ts",
+    50â†’    "example:basic": "tsx examples/basic-connection.ts",
+    51â†’    "example:leds": "tsx examples/led-animations.ts",
+    52â†’    "example:modes": "tsx examples/custom-modes.ts",
+    53â†’    "example:mapping": "tsx examples/control-mapping.ts",
+    54â†’    "backup": "tsx utils/backup-current-mode.ts",
+    55â†’    "prepublishOnly": "npm run clean && npm run build"
+    56â†’  },
+    57â†’  "keywords": [
+    58â†’    "novation",
+    59â†’    "launch-control",
+    60â†’    "xl3",
+    61â†’    "midi",
+    62â†’    "controller",
+    63â†’    "sysex",
+    64â†’    "audio",
+    65â†’    "daw",
+    66â†’    "typescript"
+    67â†’  ],
+    68â†’  "author": "",
+    69â†’  "license": "Apache-2.0",
+    70â†’  "engines": {
+    71â†’    "node": ">=18"
+    72â†’  },
+    73â†’  "dependencies": {
+    74â†’    "@types/axios": "^0.9.36",
+    75â†’    "@types/js-yaml": "^4.0.9",
+    76â†’    "axios": "^1.12.2",
+    77â†’    "chalk": "^5.3.0",
+    78â†’    "commander": "^11.1.0",
+    79â†’    "eventemitter3": "^5.0.1",
+    80â†’    "inquirer": "^9.2.12",
+    81â†’    "js-yaml": "^4.1.0",
+    82â†’    "ora": "^7.0.1",
+    83â†’    "zod": "^3.22.4"
+    84â†’  },
+    85â†’  "devDependencies": {
+    86â†’    "@oletizi/mulder-specs": "^0.6.0",
+    87â†’    "@playwright/test": "^1.55.1",
+    88â†’    "@types/node": "^20.11.0",
+    89â†’    "@vitest/coverage-v8": "^1.2.0",
+    90â†’    "easymidi": "^3.1.0",
+    91â†’    "jazz-midi-headless": "^1.1.5",
+    92â†’    "jzz": "^1.9.6",
+    93â†’    "playwright": "^1.55.1",
+    94â†’    "tsx": "^4.7.0",
+    95â†’    "typescript": "^5.3.3",
+    96â†’    "vite": "^5.0.0",
+    97â†’    "vite-plugin-dts": "^4.5.4",
+    98â†’    "vitest": "^1.2.0"
+    99â†’  },
+   100â†’  "peerDependencies": {
+   101â†’    "midi": "^2.0.0"
+   102â†’  },
+   103â†’  "peerDependenciesMeta": {
+   104â†’    "midi": {
+   105â†’      "optional": true
+   106â†’    }
+   107â†’  }
+   108â†’}
+   109â†’
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Good! I can see that `midi` is already listed as an **optional peerDependency** (lines 100-107), which is the correct approach for a browser-targeted library. However, I need to check if it's also installed somewhere it shouldn't be. Let me check if `midi` is in the dependencies or if it needs to be moved to devDependencies:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Check if midi is in devDependencies
+
+`cd modules/launch-control-xl3 && cat package.json | grep -A 20 '"devDependencies"' | grep -E '"midi"|devDependencies'`
+
+Result:
+
+```
+"devDependencies": {
+    "midi": "^2.0.0"
+    "midi": {
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+I see `midi` appears twice in the grep output. Let me get a clearer view:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Check all dependency sections for midi
+
+`cd modules/launch-control-xl3 && cat package.json | jq '.dependencies, .devDependencies, .peerDependencies' 2>&1`
+
+Error:
+
+```
+(eval):cd:1: no such file or directory: modules/launch-control-xl3
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Check dependency sections for midi
+
+`cat modules/launch-control-xl3/package.json | jq '.dependencies, .devDependencies, .peerDependencies'`
+
+Result:
+
+```
+cat: modules/launch-control-xl3/package.json: No such file or directory
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Check current directory structure
+
+`pwd && ls -la modules/*/package.json | head -5`
+
+Result:
+
+```
+/Users/orion/work/ol_dsp/modules/audio-control/modules/launch-control-xl3
+(eval):1: no matches found: modules/*/package.json
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+I'm already in the launch-control-xl3 directory. Let me check the package.json properly:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** View all dependency sections
+
+`cat package.json | jq '{dependencies, devDependencies, peerDependencies}'`
+
+Result:
+
+```
+{
+  "dependencies": {
+    "@types/axios": "^0.9.36",
+    "@types/js-yaml": "^4.0.9",
+    "axios": "^1.12.2",
+    "chalk": "^5.3.0",
+    "commander": "^11.1.0",
+    "eventemitter3": "^5.0.1",
+    "inquirer": "^9.2.12",
+    "js-yaml": "^4.1.0",
+    "ora": "^7.0.1",
+    "zod": "^3.22.4"
+  },
+  "devDependencies": {
+    "@oletizi/mulder-specs": "^0.6.0",
+    "@playwright/test": "^1.55.1",
+    "@types/node": "^20.11.0",
+    "@vitest/coverage-v8": "^1.2.0",
+    "easymidi": "^3.1.0",
+    "jazz-midi-headless": "^1.1.5",
+    "jzz": "^1.9.6",
+    "playwright": "^1.55.1",
+    "tsx": "^4.7.0",
+    "typescript": "^5.3.3",
+    "vite": "^5.0.0",
+    "vite-plugin-dts": "^4.5.4",
+    "vitest": "^1.2.0"
+  },
+  "peerDependencies": {
+    "midi": "^2.0.0"
+  }
+}
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Perfect! I can see that `midi` is currently only in `peerDependencies` (marked as optional), which is actually already correct for a browser library. However, since this is used for testing, it should be in `devDependencies` instead. Let me move it:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Edit**
+
+Result:
+
+```
+The file /Users/orion/work/ol_dsp/modules/audio-control/modules/launch-control-xl3/package.json has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
+    81â†’    "js-yaml": "^4.1.0",
+    82â†’    "ora": "^7.0.1",
+    83â†’    "zod": "^3.22.4"
+    84â†’  },
+    85â†’  "devDependencies": {
+    86â†’    "@oletizi/mulder-specs": "^0.6.0",
+    87â†’    "@playwright/test": "^1.55.1",
+    88â†’    "@types/node": "^20.11.0",
+    89â†’    "@vitest/coverage-v8": "^1.2.0",
+    90â†’    "easymidi": "^3.1.0",
+    91â†’    "jazz-midi-headless": "^1.1.5",
+    92â†’    "jzz": "^1.9.6",
+    93â†’    "midi": "^2.0.0",
+    94â†’    "playwright": "^1.55.1",
+    95â†’    "tsx": "^4.7.0",
+    96â†’    "typescript": "^5.3.3",
+    97â†’    "vite": "^5.0.0",
+    98â†’    "vite-plugin-dts": "^4.5.4",
+    99â†’    "vitest": "^1.2.0"
+   100â†’  }
+   101â†’}
+   102â†’
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Perfect! Now let me verify the change and ensure the file is correct:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Verify midi moved to devDependencies
+
+`cat package.json | jq '{dependencies, devDependencies, peerDependencies}' && echo -e "\nâœ“ Verification:" && ls -la package.json`
+
+Result:
+
+```
+{
+  "dependencies": {
+    "@types/axios": "^0.9.36",
+    "@types/js-yaml": "^4.0.9",
+    "axios": "^1.12.2",
+    "chalk": "^5.3.0",
+    "commander": "^11.1.0",
+    "eventemitter3": "^5.0.1",
+    "inquirer": "^9.2.12",
+    "js-yaml": "^4.1.0",
+    "ora": "^7.0.1",
+    "zod": "^3.22.4"
+  },
+  "devDependencies": {
+    "@oletizi/mulder-specs": "^0.6.0",
+    "@playwright/test": "^1.55.1",
+    "@types/node": "^20.11.0",
+    "@vitest/coverage-v8": "^1.2.0",
+    "easymidi": "^3.1.0",
+    "jazz-midi-headless": "^1.1.5",
+    "jzz": "^1.9.6",
+    "midi": "^2.0.0",
+    "playwright": "^1.55.1",
+    "tsx": "^4.7.0",
+    "typescript": "^5.3.3",
+    "vite": "^5.0.0",
+    "vite-plugin-dts": "^4.5.4",
+    "vitest": "^1.2.0"
+  },
+  "peerDependencies": null
+}
+
+âœ“ Verification:
+-rw-r--r--@ 1 orion  staff  3018 Oct 16 19:10 package.json
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Excellent! The `midi` package has been successfully moved to `devDependencies` and the `peerDependencies` section has been removed entirely. Now let me verify this builds and tests correctly:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Update dependencies after package.json change
+
+`pnpm install 2>&1 | tail -20`
+
+Result:
+
+```
+../.. install:     Skipping unmapped button: Voice Mode 3 (CC 45)
+../.. install:     Skipping unmapped button: Voice Mode 4 (CC 45)
+../.. install:     Skipping unmapped button: Filter Mode (CC 49)
+../.. install:     Skipping unmapped button: Env Control (CC 50)
+../.. install:     Skipping unmapped button: Special Mode (CC 51)
+../.. install:     Skipping unmapped button: Hold/Latch (CC 52)
+../.. install:     Adding TAL-J-8 mappings to channel 1
+../.. install:   âœ… Generated: novation-launch-control-xl-3.map
+../.. install:      Plugins: 5, Total mappings: 217
+../.. install: \nðŸ“¦ Installing to Ardour directory...
+../.. install: Installing to: /Users/orion/Library/Preferences/Ardour8/midi_maps
+../.. install:   âœ“ Installed: novation-launch-control-xl-3.map
+../.. install: \nâœ… Installed 1 Ardour map(s) to /Users/orion/Library/Preferences/Ardour8/midi_maps
+../.. install: \nðŸ“Š Conversion Summary:
+../.. install:   âœ… Successful: 1
+../.. install:   âŒ Failed: 0
+../.. install: \nðŸ“ Output directory: /Users/orion/work/ol_dsp/modules/audio-control/modules/ardour-midi-maps/dist/ardour-maps
+../.. install: Done
+
+Done in 5.1s
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Good! Now let me run the typecheck to ensure everything still compiles:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Verify TypeScript compilation
+
+`pnpm typecheck 2>&1 | tail -15`
+
+Result:
+
+```
+> @oletizi/launch-control-xl3@1.20.16 typecheck /Users/orion/work/ol_dsp/modules/audio-control/modules/launch-control-xl3
+> tsc --noEmit
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Perfect! Let me run a quick build to ensure everything works:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Build the module
+
+`pnpm build 2>&1 | tail -10`
+
+Result:
+
+```
+âœ“ 26 modules transformed.
+rendering chunks...
+
+[vite:dts] Start generate declaration files...
+computing gzip size...
+dist/cli.js      1.46 kB â”‚ gzip:  0.49 kB â”‚ map:   2.56 kB
+dist/index.js  160.26 kB â”‚ gzip: 34.91 kB â”‚ map: 337.82 kB
+[vite:dts] Declaration files built in 993ms.
+
+âœ“ built in 1.17s
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Excellent! Everything builds successfully. Now let me verify the package.json one more time and show a summary:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Final verification of package.json
+
+`echo "=== Package.json dependency verification ===" && cat package.json | jq '{name, version, dependencies: (.dependencies | keys), devDependencies: (.devDependencies | keys), peerDependencies}' && echo -e "\nâœ“ File verified at:" && ls -la package.json`
+
+Result:
+
+```
+=== Package.json dependency verification ===
+{
+  "name": "@oletizi/launch-control-xl3",
+  "version": "1.20.16",
+  "dependencies": [
+    "@types/axios",
+    "@types/js-yaml",
+    "axios",
+    "chalk",
+    "commander",
+    "eventemitter3",
+    "inquirer",
+    "js-yaml",
+    "ora",
+    "zod"
+  ],
+  "devDependencies": [
+    "@oletizi/mulder-specs",
+    "@playwright/test",
+    "@types/node",
+    "@vitest/coverage-v8",
+    "easymidi",
+    "jazz-midi-headless",
+    "jzz",
+    "midi",
+    "playwright",
+    "tsx",
+    "typescript",
+    "vite",
+    "vite-plugin-dts",
+    "vitest"
+  ],
+  "peerDependencies": null
+}
+
+âœ“ File verified at:
+-rw-r--r--@ 1 orion  staff  3018 Oct 16 19:10 package.json
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Perfect! I've successfully moved the `midi` package from `peerDependencies` to `devDependencies`. 
+
+**Summary of changes:**
+
+âœ… **Moved `midi` package to `devDependencies`** 
+- Removed from `peerDependencies` and `peerDependenciesMeta`
+- Added to `devDependencies` for testing purposes only
+- This ensures browser-targeted builds won't include node-midi in their bundle
+
+âœ… **Verified the change works:**
+- Dependencies reinstalled successfully
+- TypeScript compilation passes
+- Build completes successfully
+- File verified at `/Users/orion/work/ol_dsp/modules/audio-control/modules/launch-control-xl3/package.json`
+
+The library is now properly configured for browser usage with `midi` (node-midi) only available during development and testing, not in production builds.
+
+---
+
+_**User**_
+
+check the latest user comment on issue 36 to make sure you've fixed the packaging problem.
+
+---
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Get latest comment on issue 36
+
+`gh issue view 36 --json comments --jq '.comments[-1] | {author: .author.login, createdAt: .createdAt, body: .body}'`
+
+Result:
+
+```
+{"author":"oletizi","body":"## v1.20.16 Test Results - Build Error âŒ\n\n**Date Tested:** 2025-10-17  \n**Library Version:** @oletizi/launch-control-xl3 v1.20.16  \n**Test Result:** Cannot test - build error\n\n### Build Error\n\nWhen trying to load the application with v1.20.16, Vite reports:\n\n\```\nError: Could not resolve \"midi\" imported by \"@oletizi/launch-control-xl3\". Is it installed?\n\```\n\n### Analysis\n\nThis appears to be a **packaging/build issue** with v1.20.16. The library is trying to import `\"midi\"` but:\n- The dependency may not be properly declared in package.json\n- Or the build process didn't bundle it correctly\n- Or there's an import path issue\n\n### Installation Verification\n\n\```bash\n$ pnpm list @oletizi/launch-control-xl3\nvite_react_shadcn_ts@0.1.0 /Users/orion/work/xl3-web\ndependencies:\n@oletizi/launch-control-xl3 1.20.16  âœ… Installed correctly\n\```\n\nThe package is installed, but the application fails to build/run.\n\n### Recommendation\n\nThe audio-control team should:\n1. Check package.json dependencies for v1.20.16\n2. Verify the build output includes all necessary dependencies\n3. Test the published npm package in a clean environment\n4. Consider publishing a patch release (v1.20.17) with the build fix\n\n### Status\n\nâŒ **Cannot test v1.20.16** - need to resolve build error first  \nâ³ **Awaiting v1.20.17** or build fix\n\nWill test again once a working version is published.\n\nRelated: oletizi/xl3-web#4","createdAt":"2025-10-17T02:10:17Z"}
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Perfect! The user's comment confirms the exact problem I just fixed. The issue was that `midi` was being imported by the library but wasn't properly handled. I moved it to `devDependencies`, but I need to verify that the library code doesn't actually **import** it in production code.
+
+Let me check where `midi` is imported:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Grep** path `./src`
+
+Result:
+
+```
+/Users/orion/work/ol_dsp/modules/audio-control/modules/launch-control-xl3/src/backends/NodeMidiBackend.ts:10:import midi from 'midi';
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Found it! The `NodeMidiBackend.ts` file imports `midi` at the top level. Since this library is intended for browser use, this backend should NOT be included in the main bundle. Let me check what's being exported from the main index:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Read** `./src/index.ts`
+
+Result:
+
+```
+1â†’/**
+     2â†’ * @ol-dsp/launch-control-xl3
+     3â†’ *
+     4â†’ * TypeScript library for controlling the Novation Launch Control XL 3
+     5â†’ * hardware MIDI controller.
+     6â†’ *
+     7â†’ * @packageDocumentation
+     8â†’ */
+     9â†’
+    10â†’// Main controller class
+    11â†’export { LaunchControlXL3 } from './LaunchControlXL3.js';
+    12â†’export type { LaunchControlXL3Options, LaunchControlXL3Events } from './LaunchControlXL3.js';
+    13â†’export { default } from './LaunchControlXL3.js';
+    14â†’
+    15â†’// Core components
+    16â†’export * from './core/MidiInterface.js';
+    17â†’export * from './core/SysExParser.js';
+    18â†’export * from './core/Midimunge.js';
+    19â†’
+    20â†’// Device management
+    21â†’export * from './device/DeviceManager.js';
+    22â†’
+    23â†’// Custom modes
+    24â†’export * from './modes/CustomModeManager.js';
+    25â†’
+    26â†’// Builders
+    27â†’export { CustomModeBuilder, Color } from './builders/CustomModeBuilder.js';
+    28â†’
+    29â†’// Control mapping
+    30â†’export * from './mapping/ControlMapper.js';
+    31â†’
+    32â†’// MIDI Backends
+    33â†’export { NodeMidiBackend } from './backends/NodeMidiBackend.js';
+    34â†’
+    35â†’
+    36â†’// Type definitions
+    37â†’export type {
+    38â†’  // MIDI types
+    39â†’  CCNumber,
+    40â†’  MidiChannel,
+    41â†’  MidiValue,
+    42â†’  NoteNumber,
+    43â†’  Velocity,
+    44â†’  ControlChangeMessage,
+    45â†’  NoteOnMessage,
+    46â†’  NoteOffMessage,
+    47â†’  PitchBendMessage,
+    48â†’  ParsedMidiMessage,
+    49â†’  MidiParseResult,
+    50â†’  MidiEventHandlers,
+    51â†’  // Device types
+    52â†’  SlotNumber,
+    53â†’  DeviceState,
+    54â†’  DeviceOptions,
+    55â†’  RetryPolicy,
+    56â†’  HeartbeatConfig,
+    57â†’  ErrorRecoveryConfig,
+    58â†’  TimeoutConfig,
+    59â†’  DeviceOperationResult,
+    60â†’  DeviceError,
+    61â†’  DeviceErrorCode,
+    62â†’  DeviceCapabilities,
+    63â†’  LaunchControlXL3Info,
+    64â†’  LaunchControlXL3Config,
+    65â†’  DeviceMode,
+    66â†’  DeviceConnectionState,
+    67â†’  // Protocol types
+    68â†’  ControlId,
+    69â†’  ControlConfig,
+    70â†’  ControlColor,
+    71â†’  ControlRange,
+    72â†’  ModeTemplate,
+    73â†’  TemplatePreset,
+    74â†’  MidiMapping,
+    75â†’  MidiTarget,
+    76â†’  ValueTransform,
+    77â†’  FactoryPreset,
+    78â†’  PresetCategory,
+    79â†’  ProtocolValidation,
+    80â†’  ProtocolControlType,
+    81â†’  KnobPosition,
+    82â†’  KnobRow,
+    83â†’  ButtonPosition,
+    84â†’  FaderPosition,
+    85â†’  // Custom mode types (canonical)
+    86â†’  CustomMode,
+    87â†’  ControlType,
+    88â†’  ControlBehavior,
+    89â†’  Control,
+    90â†’  CustomModeResponse,
+    91â†’  CustomModeMessage,
+    92â†’  ControlMapping,
+    93â†’  ColorMapping,
+    94â†’  // Convenience types
+    95â†’  CustomModeSlot,
+    96â†’  LedColor,
+    97â†’  LedBehaviour,
+    98â†’  ControlBehaviour
+    99â†’} from './types/index.js';
+   100â†’
+   101â†’export {
+   102â†’  createCCNumber,
+   103â†’  createMidiChannel,
+   104â†’  createMidiValue,
+   105â†’  createNoteNumber,
+   106â†’  createVelocity,
+   107â†’  DEVICE_LAYOUT,
+   108â†’  DEFAULT_KNOB_CONFIG,
+   109â†’  DEFAULT_BUTTON_CONFIG,
+   110â†’  DEFAULT_FADER_CONFIG
+   111â†’} from './types/index.js';
+   112â†’
+   113â†’// Utilities
+   114â†’export * from './utils/validators.js';
+   115â†’export * from './utils/converters.js';
+   116â†’export * from './utils/helpers.js';
+   117â†’export * from './utils/bitwise.js';
+   118â†’
+   119â†’// Re-export constants for convenience
+   120â†’export {
+   121â†’  CONTROL_IDS,
+   122â†’  LED_COLORS,
+   123â†’} from './modes/CustomModeManager.js';
+   124â†’
+   125â†’
+   126â†’export {
+   127â†’  ValueTransformers,
+   128â†’  RelativeHandlers,
+   129â†’} from './mapping/ControlMapper.js';
+   130â†’
+   131â†’// Version information
+   132â†’export const VERSION = '0.1.0';
+   133â†’export const LIBRARY_NAME = '@ol-dsp/launch-control-xl3';
+   134â†’export const SUPPORTED_DEVICE = 'Novation Launch Control XL 3';
+   135â†’
+   136â†’/**
+   137â†’ * Quick start example:
+   138â†’ *
+   139â†’ * \```typescript
+   140â†’ * import { LaunchControlXL3 } from '@ol-dsp/launch-control-xl3';
+   141â†’ *
+   142â†’ * // Create controller instance
+   143â†’ * const controller = new LaunchControlXL3({
+   144â†’ *   enableCustomModes: true,
+   145â†’ * });
+   146â†’ *
+   147â†’ * // Connect to device
+   148â†’ * await controller.connect();
+   149â†’ *
+   150â†’ * // Listen for control changes
+   151â†’ * controller.on('control:change', (controlId, value) => {
+   152â†’ *   console.log(`Control ${controlId} changed to ${value}`);
+   153â†’ * });
+   154â†’ *
+   155â†’ *
+   156â†’ * // Load custom mode
+   157â†’ * const mode = await controller.loadCustomMode(0);
+   158â†’ *
+   159â†’ * // Clean up when done
+   160â†’ * await controller.cleanup();
+   161â†’ * \```
+   162â†’ */
+   163â†’
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+There's the problem! Line 33 exports `NodeMidiBackend` from the main index, which causes the `midi` package to be imported in the browser bundle. Since this library is intended for browser use, the NodeMidiBackend should NOT be exported from the main entry point. It should only be available for Node.js testing.
+
+Let me remove that export:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Edit**
+
+Result:
+
+```
+The file /Users/orion/work/ol_dsp/modules/audio-control/modules/launch-control-xl3/src/index.ts has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
+    25â†’
+    26â†’// Builders
+    27â†’export { CustomModeBuilder, Color } from './builders/CustomModeBuilder.js';
+    28â†’
+    29â†’// Control mapping
+    30â†’export * from './mapping/ControlMapper.js';
+    31â†’
+    32â†’// Type definitions
+    33â†’export type {
+    34â†’  // MIDI types
+    35â†’  CCNumber,
+    36â†’  MidiChannel,
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Good! Now let me verify the build works and check if there are any other files that might be importing NodeMidiBackend:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Bash** Build with NodeMidiBackend removed from exports
+
+`pnpm build 2>&1 | tail -15`
+
+Result:
+
+```
+> @oletizi/launch-control-xl3@1.20.16 build /Users/orion/work/ol_dsp/modules/audio-control/modules/launch-control-xl3
+> vite build
+
+vite v5.4.20 building for production...
+transforming...
+âœ“ 23 modules transformed.
+rendering chunks...
+
+[vite:dts] Start generate declaration files...
+computing gzip size...
+dist/cli.js      1.46 kB â”‚ gzip:  0.49 kB â”‚ map:   2.56 kB
+dist/index.js  143.81 kB â”‚ gzip: 31.28 kB â”‚ map: 303.85 kB
+[vite:dts] Declaration files built in 979ms.
+
+âœ“ built in 1.13s
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Excellent! The build succeeded and notice the bundle is now smaller (143.81 kB vs 160.26 kB previously), confirming that NodeMidiBackend is no longer being bundled. Now let me check if any other source files import NodeMidiBackend that would break:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Grep** path `./src`
+
+Result:
+
+```
+Found 2 files
+/Users/orion/work/ol_dsp/modules/audio-control/modules/launch-control-xl3/src/backends/NodeMidiBackend.ts
+/Users/orion/work/ol_dsp/modules/audio-control/modules/launch-control-xl3/src/core/MidiInterface.ts
+```
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Let me check MidiInterface.ts to see how it uses NodeMidiBackend:
+
+_**Agent (claude-sonnet-4-5-20250929)**_
+
+Tool use: **Grep** path `./src/core/MidiInterface.ts`
+
+Result:
+
+```
+382-  //   // Try node-midi (Node.js with native bindings - fallback if easymidi unavailable)
+383-  //   try {
+384:  //     const { NodeMidiBackend } = await import('./backends/NodeMidiBackend.js');
+385:  //     return new NodeMidiBackend();
+386-  //   } catch (err) {
+387-  //     console.debug('node-midi not available:', err);
+```
+
diff --git a/modules/audio-control/modules/launch-control-xl3/package.json b/modules/audio-control/modules/launch-control-xl3/package.json
index 5eff0cf..7c04533 100644
--- a/modules/audio-control/modules/launch-control-xl3/package.json
+++ b/modules/audio-control/modules/launch-control-xl3/package.json
@@ -90,19 +90,12 @@
     "easymidi": "^3.1.0",
     "jazz-midi-headless": "^1.1.5",
     "jzz": "^1.9.6",
+    "midi": "^2.0.0",
     "playwright": "^1.55.1",
     "tsx": "^4.7.0",
     "typescript": "^5.3.3",
     "vite": "^5.0.0",
     "vite-plugin-dts": "^4.5.4",
     "vitest": "^1.2.0"
-  },
-  "peerDependencies": {
-    "midi": "^2.0.0"
-  },
-  "peerDependenciesMeta": {
-    "midi": {
-      "optional": true
-    }
   }
 }
diff --git a/modules/audio-control/modules/launch-control-xl3/src/index.ts b/modules/audio-control/modules/launch-control-xl3/src/index.ts
index 55b5502..a833689 100644
--- a/modules/audio-control/modules/launch-control-xl3/src/index.ts
+++ b/modules/audio-control/modules/launch-control-xl3/src/index.ts
@@ -29,10 +29,6 @@ export { CustomModeBuilder, Color } from './builders/CustomModeBuilder.js';
 // Control mapping
 export * from './mapping/ControlMapper.js';
 
-// MIDI Backends
-export { NodeMidiBackend } from './backends/NodeMidiBackend.js';
-
-
 // Type definitions
 export type {
   // MIDI types
diff --git a/modules/audio-control/pnpm-lock.yaml b/modules/audio-control/pnpm-lock.yaml
index 485d7cd..f27876d 100644
--- a/modules/audio-control/pnpm-lock.yaml
+++ b/modules/audio-control/pnpm-lock.yaml
@@ -96,9 +96,6 @@ importers:
       js-yaml:
         specifier: ^4.1.0
         version: 4.1.0
-      midi:
-        specifier: ^2.0.0
-        version: 2.0.0
       ora:
         specifier: ^7.0.1
         version: 7.0.1
@@ -127,6 +124,9 @@ importers:
       jzz:
         specifier: ^1.9.6
         version: 1.9.6
+      midi:
+        specifier: ^2.0.0
+        version: 2.0.0
       playwright:
         specifier: ^1.55.1
         version: 1.56.0
@@ -1859,7 +1859,7 @@ packages:
     resolution: {integrity: sha512-p2q/t/mhvuOj/UeLlV6566GD/guowlr0hHxClI0W9m7MWYkL1F0hLo+0Aexs9HSPCtR1SXQ0TD3MMKrXZajbiQ==}
     dependencies:
       file-uri-to-path: 1.0.0
-    dev: false
+    dev: true
 
   /bl@4.1.0:
     resolution: {integrity: sha512-1W07cM9gS6DcLperZfFSj+bWLtaPGSOHWhPiGzXmvVJbRLdG82sH/Kn8EtW1VqWVA54AKf2h5k5BbnIbwF3h6w==}
@@ -2473,7 +2473,7 @@ packages:
 
   /file-uri-to-path@1.0.0:
     resolution: {integrity: sha512-0Zt+s3L7Vf1biwWZ29aARiVYLx7iMGnEUl9x33fbB/j3jR81u/O2LbqK+Bm1CDSNDKVtJ/YjwY7TUd5SkeLQLw==}
-    dev: false
+    dev: true
 
   /fill-range@7.1.1:
     resolution: {integrity: sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==}
@@ -3129,7 +3129,7 @@ packages:
     dependencies:
       bindings: 1.5.0
       nan: 2.23.0
-    dev: false
+    dev: true
 
   /mime-db@1.52.0:
     resolution: {integrity: sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==}
@@ -3202,7 +3202,7 @@ packages:
 
   /nan@2.23.0:
     resolution: {integrity: sha512-1UxuyYGdoQHcGg87Lkqm3FzefucTa0NAiOcuRsDmysep3c1LVCRK2krrUDafMWtjSG04htvAmvg96+SDknOmgQ==}
-    dev: false
+    dev: true
 
   /nanoid@3.3.11:
     resolution: {integrity: sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==}


---

_**Agent (claude-sonnet-4-5-20250929)**_

chore(deps): move node-midi to devDependencies and remove from main exports

